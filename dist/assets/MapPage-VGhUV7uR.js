const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ThreeHero-BkOkI89g.js","assets/index-f55PPs_m.js","assets/index-CYm54BcG.css"])))=>i.map(i=>d[i]);
import{r as n,j as t,w as g,x as A,_}from"./index-f55PPs_m.js";import{D as V}from"./DocumentViewer-96R4_ASz.js";const P=[{id:"INSAT-1",country:"India",launch_date:"01-01-1980",mass:"100",launcher:"PSLV"},{id:"GSAT-1",country:"India",launch_date:"13-05-2001",mass:"1450",launcher:"GSLV"},{id:"GSAT-2",country:"India",launch_date:"08-05-2003",mass:"1825",launcher:"GSLV"},{id:"GSAT-3",country:"India",launch_date:"20-12-2004",mass:"1950",launcher:"GSLV"},{id:"GSAT-4",country:"India",launch_date:"15-04-2007",mass:"2220",launcher:"GSLV"},{id:"GSAT-5",country:"India",launch_date:"27-08-2007",mass:"2310",launcher:"Ariane 5"}],$={customer_satellites:P};function z(){const[s,y]=n.useState([]),[l,o]=n.useState([]),[a,i]=n.useState([]),[d,p]=n.useState(null),[v,L]=n.useState(null),[k,S]=n.useState(null),u=n.useRef(null),h=n.useRef(null),w=n.useRef([]);return n.useEffect(()=>{(async()=>{var b;y(g.map(e=>{var m;return{id:e.id,name:e.metadata.ownership,coordinates:e.metadata.coordinates,country:e.country,acva:(m=e.timeline.find(I=>I.acvaId))==null?void 0:m.acvaId}})),o(A.map(e=>({id:e.id,agencyName:e.agencyName,country:"India",contact:e.contactInfo,coordinates:{lat:20.5937,lng:78.9629}}))),g.length>0&&p({id:g[0].id,name:g[0].metadata.ownership,coordinates:g[0].metadata.coordinates,country:g[0].country,acva:(b=g[0].timeline.find(e=>e.acvaId))==null?void 0:b.acvaId});const c=$.customer_satellites||[],x={India:{lat:20.5937,lng:78.9629}},N=c.map(e=>{const m=x[e.country]||{lat:0,lng:0};return{...e,coordinates:m}});i(N)})();let f=!0;return(async()=>{try{if(await G(),!f)return;const c=window.L;if(!u.current){u.current=c.map("nee-map",{center:[20.5937,78.9629],zoom:5,maxBounds:c.latLngBounds([[8.4,68.7],[37.6,97.25]])}),c.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(u.current);try{await T();const x=window.L.markerClusterGroup;x&&(h.current=x(),u.current.addLayer(h.current))}catch{}}}catch(c){console.warn("Leaflet failed to load",c)}})(),()=>{f=!1}},[]),n.useEffect(()=>{const r=window.L;if(!r||!u.current)return;try{h.current&&h.current.clearLayers()}catch{}w.current.forEach(e=>e.remove()),w.current=[];const f=(e,m)=>r.divIcon({html:`<div style="background:${e};width:18px;height:18px;border-radius:50%;box-shadow:0 0 0 2px rgba(0,0,0,0.08);display:flex;align-items:center;justify-content:center;color:#fff;font-size:10px;font-weight:600">${m||""}</div>`,className:"",iconSize:[18,18]}),c=(e,m,I,C,E)=>{const j=r.marker([e,m],{icon:E}).bindPopup(`<strong>${I}</strong><br/>${C}`);return w.current.push(j),h.current&&typeof h.current.addLayer=="function"?h.current.addLayer(j):j.addTo(u.current),j},x=f("#0ea5a4","P"),N=f("#7c3aed","A"),b=f("#ef4444","S");s.forEach(e=>c(e.coordinates.lat,e.coordinates.lng,e.name||e.id,e.country||"",x)),l.forEach(e=>c(e.coordinates.lat,e.coordinates.lng,e.agencyName||e.id,e.country||"",N)),a.forEach(e=>{e.coordinates&&e.coordinates.lat!==0&&c(e.coordinates.lat,e.coordinates.lng,e.id,e.country||"",b)}),d&&d.coordinates?u.current.setView([d.coordinates.lat,d.coordinates.lng],6):k&&u.current.setView([k.lat,k.lng],6)},[s,l,a,d,k]),t.jsxs("div",{className:"p-6 min-h-screen readable-surface",children:[t.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[t.jsx("div",{className:"hidden sm:block",children:t.jsx(n.Suspense,{fallback:null,children:t.jsx(M,{})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-gradient-heading text-2xl font-extrabold hero-readable-text",children:"Map â€” Projects & ACVAs"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Select a project or ACVA to center the map and view details"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[t.jsx("h3",{className:"font-medium mb-3 text-gray-900 dark:text-gray-100",children:"Projects"}),s.map(r=>t.jsx("button",{onClick:()=>p(r),className:`w-full text-left p-2 rounded hover:bg-nee-50 dark:hover:bg-gray-700 ${(d==null?void 0:d.id)===r.id?"bg-nee-50 dark:bg-gray-700 border border-nee-200 dark:border-gray-600":""}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-nee-800 dark:text-gray-100",children:r.name||r.id}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.country})]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[r.coordinates.lat.toFixed(2),", ",r.coordinates.lng.toFixed(2)]})]})},r.id))]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[t.jsx("h3",{className:"font-medium mb-3 text-gray-900 dark:text-gray-100",children:"ACVAs"}),l.map(r=>t.jsx("button",{onClick:()=>p(r),className:`w-full text-left p-2 rounded hover:bg-nee-50 dark:hover:bg-gray-700 ${(d==null?void 0:d.id)===r.id?"bg-nee-50 dark:bg-gray-700 border border-nee-200 dark:border-gray-600":""}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-nee-800 dark:text-gray-100",children:r.agencyName||r.id}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.country})]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[r.coordinates.lat.toFixed(2),", ",r.coordinates.lng.toFixed(2)]})]})},r.id))]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[t.jsx("h3",{className:"font-medium mb-3 text-gray-900 dark:text-gray-100",children:"Satellites"}),a.map(r=>t.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-nee-50 dark:hover:bg-gray-700",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-nee-800 dark:text-gray-100",children:r.id}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.country})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>L({title:`Satellite: ${r.id}`,content:`ID: ${r.id}
Country: ${r.country}
Launch Date: ${r.launch_date}
Mass: ${r.mass}
Launcher: ${r.launcher}`}),className:"text-nee-600 dark:text-nee-400 hover:text-nee-700 dark:hover:text-nee-300 text-sm",children:"Details"}),t.jsx("button",{onClick:()=>{S(r.coordinates),p({id:r.id,name:r.id,coordinates:r.coordinates})},className:"text-nee-600 dark:text-nee-400 hover:text-nee-700 dark:hover:text-nee-300 text-sm",children:"View on Map"})]})]},r.id))]})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsx("div",{className:"bg-white/85 dark:bg-gray-800/70 rounded-xl border border-gray-200/60 dark:border-gray-700/60 p-4 h-[70vh] backdrop-blur-sm",children:t.jsx("div",{id:"nee-map",className:"w-full h-full rounded",style:{minHeight:"420px"}})})})]}),v&&t.jsx(V,{title:v.title,content:v.content,open:!0,onClose:()=>L(null)})]})}function G(){return new Promise((s,y)=>{if(window.L)return s();const l="leaflet-css";if(!document.getElementById(l)){const i=document.createElement("link");i.id=l,i.rel="stylesheet",i.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(i)}const o="leaflet-js";if(document.getElementById(o))return s();const a=document.createElement("script");a.id=o,a.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",a.onload=()=>s(),a.onerror=()=>y(new Error("Failed to load leaflet")),document.body.appendChild(a)})}const M=n.lazy(()=>_(()=>import("./ThreeHero-BkOkI89g.js"),__vite__mapDeps([0,1,2])));function T(){return new Promise(s=>{const y="leaflet-markercluster-css";if(!document.getElementById(y)){const a=document.createElement("link");a.id=y,a.rel="stylesheet",a.href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css",document.head.appendChild(a);const i=document.createElement("link");i.rel="stylesheet",i.href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css",document.head.appendChild(i)}const l="leaflet-markercluster-js";if(window.L&&window.L.markerClusterGroup||document.getElementById(l))return s();const o=document.createElement("script");o.id=l,o.src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js",o.onload=()=>s(),o.onerror=()=>s(),document.body.appendChild(o)})}export{z as default};
