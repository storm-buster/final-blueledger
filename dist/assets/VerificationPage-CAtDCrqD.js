import{r as h,j as e,s as m}from"./index-f55PPs_m.js";import{D as b}from"./DocumentViewer-96R4_ASz.js";import{T as N}from"./trending-up-B-kM_kqh.js";import{E as w}from"./eye-BgzYpLwB.js";import{F as d}from"./file-text-BbYC1H0m.js";import{C as u}from"./clock-DCb0nvGV.js";import{X as y}from"./x-circle-je_U2-pP.js";import{A as C}from"./arrow-left-DuIS-xwc.js";function $({verifications:s,onUpdateVerification:p}){const[x,o]=h.useState(null),[a,c]=h.useState(null),n=t=>{switch(t){case"Approved":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"Pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},l=t=>{switch(t){case"Approved":return e.jsx(m,{className:"w-4 h-4 text-green-500"});case"Rejected":return e.jsx(y,{className:"w-4 h-4 text-red-500"});case"Pending":return e.jsx(u,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(u,{className:"w-4 h-4 text-gray-400"})}};return x?e.jsx(D,{verification:x,onBack:()=>o(null),onUpdateVerification:p,verifications:s}):e.jsxs("div",{className:"p-6 readable-surface",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-gradient-heading text-3xl font-extrabold hero-readable-text mb-2",children:"Verification Management"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Review periodic verification reports and approve credit issuance"})]}),e.jsx("div",{className:"overflow-x-auto bg-white/85 dark:bg-gray-800/70 backdrop-blur-md rounded-xl shadow-lg border border-gray-200/60 dark:border-gray-700/60",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Project ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Account ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Cycles Done"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Current Cycle"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"ACVA"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Credits Recommended"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map((t,g)=>e.jsxs("tr",{className:"hover:bg-gray-50/70 dark:hover:bg-gray-700/60 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.projectId})}),e.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300",children:t.accountId}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 shadow-sm",children:[t.cyclesDone," completed"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:["Cycle ",t.currentCycle]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-nee-100 dark:bg-nee-900/30 text-nee-800 dark:text-nee-300 shadow-sm",children:t.acvaId})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-4 h-4 text-nee-500 dark:text-nee-400 mr-2"}),e.jsx("span",{className:"font-medium text-nee-700 dark:text-nee-300",children:t.creditsRecommended.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[l(t.status),e.jsx("span",{className:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium shadow-sm ${n(t.status)}`,children:t.status})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>o(t),className:"inline-flex items-center px-3 py-1.5 bg-nee-600 dark:bg-nee-700 text-white text-sm font-medium rounded-lg hover:scale-[1.02] transition-transform shadow-sm",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"Review"]}),t.status==="Approved"&&t.approvedDocument&&e.jsxs("button",{onClick:()=>c({title:`Approved Certificate - ${t.projectId}`,content:t.approvedDocument||"No certificate"}),className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),"View Certificate"]})]})})]},g))})]})})}),a&&e.jsx(b,{title:a.title,content:a.content,open:!0,onClose:()=>c(null)})]})}function D({verification:s,onBack:p,onUpdateVerification:x,verifications:o}){const[a,c]=h.useState(null),[n,l]=h.useState(null),t=()=>{console.log("Approving verification for project:",s.projectId),console.log("Credits to issue:",s.creditsRecommended),console.log("Buffer credits to deduct:",s.bufferCreditsDeducted);const r=o.map(i=>i.projectId===s.projectId&&i.currentCycle===s.currentCycle?{...i,status:"Approved",approvedDocument:`approved_and_verified_${s.projectId}_cycle${s.currentCycle}.pdf`}:i),j=s.currentCycle+1,f={projectId:s.projectId,accountId:s.accountId,cyclesDone:s.cyclesDone+1,currentCycle:j,acvaId:s.acvaId,pddDocument:s.pddDocument,verificationReport:void 0,creditsRecommended:0,bufferCreditsDeducted:0,status:"Pending",verificationDate:new Date(Date.now()+365*24*60*60*1e3).toISOString()};r.push(f),x(r),c("approve")},g=()=>{console.log("Rejecting verification for project:",s.projectId),c("reject")};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:p,className:"inline-flex items-center text-nee-600 hover:text-nee-700 mb-4",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Back to Verifications"]}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Verification Review: ",s.projectId]}),e.jsx("p",{className:"text-gray-600",children:"Compare Project Design Document with Verification Report"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2 text-blue-500"}),"Project Design Document (PDD)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Original Project Document"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.pddDocument}),e.jsxs("button",{onClick:()=>l({title:`PDD - ${s.projectId}`,content:s.pddDocument}),className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"View PDD"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Document Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Project ID:"}),e.jsx("span",{className:"text-blue-800",children:s.projectId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Account ID:"}),e.jsx("span",{className:"text-blue-800",children:s.accountId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Current Cycle:"}),e.jsx("span",{className:"text-blue-800",children:s.currentCycle})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(m,{className:"w-5 h-5 mr-2 text-nee-500"}),"Verification Report - Cycle ",s.currentCycle]}),e.jsxs("div",{className:"space-y-4",children:[s.verificationReport?e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(m,{className:"w-12 h-12 text-nee-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Submitted by ACVA"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.verificationReport}),e.jsxs("button",{onClick:()=>l({title:`Verification Report - ${s.projectId}`,content:s.verificationReport||"No report"}),className:"mt-4 inline-flex items-center px-4 py-2 bg-nee-600 text-white text-sm font-medium rounded-lg hover:bg-nee-700 transition-colors",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"View Report"]})]}):e.jsxs("div",{className:"border-2 border-dashed border-yellow-300 rounded-lg p-8 text-center",children:[e.jsx(u,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),e.jsx("p",{className:"text-yellow-600 mb-2",children:"Awaiting ACVA Submission"}),e.jsx("p",{className:"text-gray-600",children:"Verification report not yet submitted"})]}),s.approvedDocument&&e.jsxs("div",{className:"border-2 border-dashed border-green-300 rounded-lg p-8 text-center",children:[e.jsx(m,{className:"w-12 h-12 text-green-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Approved and Verified Certificate"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.approvedDocument}),e.jsxs("button",{onClick:()=>l({title:`Approved Certificate - ${s.projectId}`,content:s.approvedDocument||"No certificate"}),className:"mt-4 inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"View Certificate"]})]}),e.jsxs("div",{className:"bg-nee-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-nee-800 mb-2",children:"ACVA Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-nee-600",children:"ACVA ID:"}),e.jsx("span",{className:"text-nee-800",children:s.acvaId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-nee-600",children:"Verification Date:"}),e.jsx("span",{className:"meta-text",children:new Date(s.verificationDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-nee-600",children:"Status:"}),e.jsx("span",{className:`font-medium ${s.status==="Approved"?"text-green-600":s.status==="Rejected"?"text-red-600":"text-yellow-600"}`,children:s.status})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Credit Calculation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-nee-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-nee-800 mb-2",children:"Credits Recommended"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-6 h-6 text-nee-600 mr-2"}),e.jsx("span",{className:"text-2xl font-bold text-nee-700",children:s.creditsRecommended.toLocaleString()})]}),e.jsx("p",{className:"text-sm text-nee-600 mt-1",children:"Based on verified carbon removal"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-amber-800 mb-2",children:"Buffer Credits Deducted"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-2xl font-bold text-amber-700",children:s.bufferCreditsDeducted.toLocaleString()})}),e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"Risk buffer allocation"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Verification Timeline"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:s.cyclesDone+1},(r,j)=>j+1).map(r=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-2 ${r<=s.cyclesDone?"bg-green-500":r===s.currentCycle?"bg-yellow-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-gray-800",children:["Verification Cycle ",r]}),e.jsx("span",{className:"text-sm text-gray-600",children:r<=s.cyclesDone?"Completed":r===s.currentCycle?"In Progress":"Pending"})]}),r===s.currentCycle&&e.jsxs("p",{className:"text-sm text-nee-600 mt-1",children:["Current cycle - ",s.creditsRecommended.toLocaleString()," credits recommended"]})]})]},r))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Project Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Project ID"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.projectId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Account ID"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.accountId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ACVA Assigned"}),e.jsx("p",{className:"font-medium text-gray-800",children:s.acvaId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Verification Date"}),e.jsx("p",{className:"font-medium meta-text",children:new Date(s.verificationDate).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Verification Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cycles Completed"}),e.jsx("span",{className:"font-medium text-gray-800",children:s.cyclesDone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Cycle"}),e.jsx("span",{className:"font-medium text-gray-800",children:s.currentCycle})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:`font-medium ${s.status==="Approved"?"text-green-700":s.status==="Rejected"?"text-red-700":"text-yellow-700"}`,children:s.status})]})]})]})]})]}),s.status==="Pending"&&s.verificationReport&&e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Verification Decision"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx("p",{children:"Review the verification report and make a decision:"}),e.jsxs("ul",{className:"mt-2 text-sm list-disc list-inside space-y-1",children:[e.jsx("li",{children:"✅ Approve: Credits issued automatically via smart contract"}),e.jsx("li",{children:"❌ Reject: No credits issued, ACVA must resubmit report"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:g,className:"inline-flex items-center px-6 py-2 text-white text-sm font-semibold rounded-lg bg-gradient-to-r from-red-600 to-red-700 dark:from-red-700 dark:to-red-800 shadow-lg ring-1 ring-red-300 dark:ring-red-900 hover:scale-[1.03] transition-transform",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Reject"]}),e.jsxs("button",{onClick:t,className:"inline-flex items-center px-6 py-2 text-white text-sm font-semibold rounded-lg bg-gradient-to-r from-green-500 to-nee-600 dark:from-green-600 dark:to-nee-500 shadow-lg ring-1 ring-green-300 dark:ring-green-900 hover:scale-[1.03] transition-transform",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Approve & Issue Credits"]})]})]}),a&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${a==="approve"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsx("p",{className:`font-medium ${a==="approve"?"text-green-800":"text-red-800"}`,children:a==="approve"?`✅ Verification approved! ${s.creditsRecommended.toLocaleString()} credits issued via smart contract.`:"❌ Verification rejected! ACVA must resubmit corrected report."})}),n&&e.jsx(b,{title:n.title,content:n.content,open:!0,onClose:()=>l(null)})]})]})}export{$ as default};
