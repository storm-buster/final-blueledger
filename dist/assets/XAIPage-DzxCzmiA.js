import{c as M,r as N,j as t,v as k,s as xe}from"./index-f55PPs_m.js";import{F as H}from"./file-text-BbYC1H0m.js";import{T as pe}from"./trending-up-B-kM_kqh.js";import{X as ye}from"./x-circle-je_U2-pP.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=M("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=M("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=M("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=M("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var K;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(K||(K={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(V||(V={}));var Y;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Y||(Y={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=["user","model","function","system"];var W;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(W||(W={}));var X;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(X||(X={}));var J;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(J||(J={}));var z;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(z||(z={}));var w;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(w||(w={}));var Z;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Z||(Z={}));var Q;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Q||(Q={}));var ee;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ee||(ee={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class I extends x{constructor(n,s){super(n),this.response=s}}class ce extends x{constructor(n,s,a,i){super(n),this.status=s,this.statusText=a,this.errorDetails=i}}class C extends x{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee="https://generativelanguage.googleapis.com",Ce="v1beta",je="0.21.0",Ae="genai-js";var A;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(A||(A={}));class Ie{constructor(n,s,a,i,r){this.model=n,this.task=s,this.apiKey=a,this.stream=i,this.requestOptions=r}toString(){var n,s;const a=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||Ce;let r=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||Ee}/${a}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function we(e){const n=[];return e!=null&&e.apiClient&&n.push(e.apiClient),n.push(`${Ae}/${je}`),n.join(" ")}async function _e(e){var n;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",we(e.requestOptions)),s.append("x-goog-api-key",e.apiKey);let a=(n=e.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(i){throw new C(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${i.message}`)}for(const[i,r]of a.entries()){if(i==="x-goog-api-key")throw new C(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new C(`Header name ${i} can only be set using the apiClient field`);s.append(i,r)}}return s}async function Re(e,n,s,a,i,r){const o=new Ie(e,n,s,a,r);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},Me(r)),{method:"POST",headers:await _e(o),body:i})}}async function S(e,n,s,a,i,r={},o=fetch){const{url:c,fetchOptions:d}=await Re(e,n,s,a,i,r);return Se(c,d,o)}async function Se(e,n,s=fetch){let a;try{a=await s(e,n)}catch(i){ke(i,e)}return a.ok||await Oe(a,e),a}function ke(e,n){let s=e;throw e instanceof ce||e instanceof C||(s=new x(`Error fetching from ${n.toString()}: ${e.message}`),s.stack=e.stack),s}async function Oe(e,n){let s="",a;try{const i=await e.json();s=i.error.message,i.error.details&&(s+=` ${JSON.stringify(i.error.details)}`,a=i.error.details)}catch{}throw new ce(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,a)}function Me(e){const n={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const s=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>s.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{s.abort()}),n.signal=s.signal}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),O(e.candidates[0]))throw new I(`${E(e)}`,e);return Te(e)}else if(e.promptFeedback)throw new I(`Text not available. ${E(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O(e.candidates[0]))throw new I(`${E(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),te(e)[0]}else if(e.promptFeedback)throw new I(`Function call not available. ${E(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O(e.candidates[0]))throw new I(`${E(e)}`,e);return te(e)}else if(e.promptFeedback)throw new I(`Function call not available. ${E(e)}`,e)},e}function Te(e){var n,s,a,i;const r=[];if(!((s=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||i===void 0?void 0:i.parts)o.text&&r.push(o.text),o.executableCode&&r.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&r.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function te(e){var n,s,a,i;const r=[];if(!((s=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&r.push(o.functionCall);if(r.length>0)return r}const Le=[w.RECITATION,w.SAFETY,w.LANGUAGE];function O(e){return!!e.finishReason&&Le.includes(e.finishReason)}function E(e){var n,s,a;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((n=e.promptFeedback)===null||n===void 0)&&n.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){const r=e.candidates[0];O(r)&&(i+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(i+=`: ${r.finishMessage}`))}return i}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function Ge(e,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(e,n||[]),i,r=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(u){a[u]&&(i[u]=function(l){return new Promise(function(h,y){r.push([u,l,h,y])>1||c(u,l)})})}function c(u,l){try{d(a[u](l))}catch(h){v(r[0][3],h)}}function d(u){u.value instanceof _?Promise.resolve(u.value.v).then(g,b):v(r[0][2],u)}function g(u){c("next",u)}function b(u){c("throw",u)}function v(u,l){u(l),r.shift(),r.length&&c(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function De(e){const n=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=$e(n),[a,i]=s.tee();return{stream:Ue(a),response:Fe(i)}}async function Fe(e){const n=[],s=e.getReader();for(;;){const{done:a,value:i}=await s.read();if(a)return T(Be(n));n.push(i)}}function Ue(e){return Ge(this,arguments,function*(){const s=e.getReader();for(;;){const{value:a,done:i}=yield _(s.read());if(i)break;yield yield _(T(a))}})}function $e(e){const n=e.getReader();return new ReadableStream({start(a){let i="";return r();function r(){return n.read().then(({value:o,done:c})=>{if(c){if(i.trim()){a.error(new x("Failed to parse stream"));return}a.close();return}i+=o;let d=i.match(ne),g;for(;d;){try{g=JSON.parse(d[1])}catch{a.error(new x(`Error parsing JSON response: "${d[1]}"`));return}a.enqueue(g),i=i.substring(d[0].length),d=i.match(ne)}return r()})}}})}function Be(e){const n=e[e.length-1],s={promptFeedback:n==null?void 0:n.promptFeedback};for(const a of e){if(a.candidates)for(const i of a.candidates){const r=i.index;if(s.candidates||(s.candidates=[]),s.candidates[r]||(s.candidates[r]={index:i.index}),s.candidates[r].citationMetadata=i.citationMetadata,s.candidates[r].groundingMetadata=i.groundingMetadata,s.candidates[r].finishReason=i.finishReason,s.candidates[r].finishMessage=i.finishMessage,s.candidates[r].safetyRatings=i.safetyRatings,i.content&&i.content.parts){s.candidates[r].content||(s.candidates[r].content={role:i.content.role||"user",parts:[]});const o={};for(const c of i.content.parts)c.text&&(o.text=c.text),c.functionCall&&(o.functionCall=c.functionCall),c.executableCode&&(o.executableCode=c.executableCode),c.codeExecutionResult&&(o.codeExecutionResult=c.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),s.candidates[r].content.parts.push(o)}}a.usageMetadata&&(s.usageMetadata=a.usageMetadata)}return s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function de(e,n,s,a){const i=await S(n,A.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),a);return De(i)}async function le(e,n,s,a){const r=await(await S(n,A.GENERATE_CONTENT,e,!1,JSON.stringify(s),a)).json();return{response:T(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function R(e){let n=[];if(typeof e=="string")n=[{text:e}];else for(const s of e)typeof s=="string"?n.push({text:s}):n.push(s);return He(n)}function He(e){const n={role:"user",parts:[]},s={role:"function",parts:[]};let a=!1,i=!1;for(const r of e)"functionResponse"in r?(s.parts.push(r),i=!0):(n.parts.push(r),a=!0);if(a&&i)throw new x("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!i)throw new x("No content is provided for sending chat message.");return a?n:s}function Pe(e,n){var s;let a={model:n==null?void 0:n.model,generationConfig:n==null?void 0:n.generationConfig,safetySettings:n==null?void 0:n.safetySettings,tools:n==null?void 0:n.tools,toolConfig:n==null?void 0:n.toolConfig,systemInstruction:n==null?void 0:n.systemInstruction,cachedContent:(s=n==null?void 0:n.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new C("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(i)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{const r=R(e);a.contents=[r]}return{generateContentRequest:a}}function se(e){let n;return e.contents?n=e:n={contents:[R(e)]},e.systemInstruction&&(n.systemInstruction=ue(e.systemInstruction)),n}function Ke(e){return typeof e=="string"||Array.isArray(e)?{content:R(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ve={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ye(e){let n=!1;for(const s of e){const{role:a,parts:i}=s;if(!n&&a!=="user")throw new x(`First content should be with role 'user', got ${a}`);if(!q.includes(a))throw new x(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(q)}`);if(!Array.isArray(i))throw new x("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new x("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of i)for(const d of ie)d in c&&(r[d]+=1);const o=Ve[a];for(const c of ie)if(!o.includes(c)&&r[c]>0)throw new x(`Content with role '${a}' can't contain '${c}' part`);n=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="SILENT_ERROR";class qe{constructor(n,s,a,i={}){this.model=s,this.params=a,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,a!=null&&a.history&&(Ye(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,s={}){var a,i,r,o,c,d;await this._sendPromise;const g=R(n),b={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,g]},v=Object.assign(Object.assign({},this._requestOptions),s);let u;return this._sendPromise=this._sendPromise.then(()=>le(this._apiKey,this.model,b,v)).then(l=>{var h;if(l.response.candidates&&l.response.candidates.length>0){this._history.push(g);const y=Object.assign({parts:[],role:"model"},(h=l.response.candidates)===null||h===void 0?void 0:h[0].content);this._history.push(y)}else{const y=E(l.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}u=l}),await this._sendPromise,u}async sendMessageStream(n,s={}){var a,i,r,o,c,d;await this._sendPromise;const g=R(n),b={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,g]},v=Object.assign(Object.assign({},this._requestOptions),s),u=de(this._apiKey,this.model,b,v);return this._sendPromise=this._sendPromise.then(()=>u).catch(l=>{throw new Error(ae)}).then(l=>l.response).then(l=>{if(l.candidates&&l.candidates.length>0){this._history.push(g);const h=Object.assign({},l.candidates[0].content);h.role||(h.role="model"),this._history.push(h)}else{const h=E(l);h&&console.warn(`sendMessageStream() was unsuccessful. ${h}. Inspect response object for details.`)}}).catch(l=>{l.message!==ae&&console.error(l)}),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function We(e,n,s,a){return(await S(n,A.COUNT_TOKENS,e,!1,JSON.stringify(s),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xe(e,n,s,a){return(await S(n,A.EMBED_CONTENT,e,!1,JSON.stringify(s),a)).json()}async function Je(e,n,s,a){const i=s.requests.map(o=>Object.assign(Object.assign({},o),{model:n}));return(await S(n,A.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(n,s,a={}){this.apiKey=n,this._requestOptions=a,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=ue(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(n,s={}){var a;const i=se(n),r=Object.assign(Object.assign({},this._requestOptions),s);return le(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},i),r)}async generateContentStream(n,s={}){var a;const i=se(n),r=Object.assign(Object.assign({},this._requestOptions),s);return de(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},i),r)}startChat(n){var s;return new qe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},n),this._requestOptions)}async countTokens(n,s={}){const a=Pe(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),s);return We(this.apiKey,this.model,a,i)}async embedContent(n,s={}){const a=Ke(n),i=Object.assign(Object.assign({},this._requestOptions),s);return Xe(this.apiKey,this.model,a,i)}async batchEmbedContents(n,s={}){const a=Object.assign(Object.assign({},this._requestOptions),s);return Je(this.apiKey,this.model,n,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(n){this.apiKey=n}getGenerativeModel(n,s){if(!n.model)throw new x("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new re(this.apiKey,n,s)}getGenerativeModelFromCachedContent(n,s,a){if(!n.name)throw new C("Cached content must contain a `name` field.");if(!n.model)throw new C("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(s!=null&&s[o]&&n[o]&&(s==null?void 0:s[o])!==n[o]){if(o==="model"){const c=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,d=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(c===d)continue}throw new C(`Different value for "${o}" specified in modelParams (${s[o]}) and cachedContent (${n[o]})`)}const r=Object.assign(Object.assign({},s),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new re(this.apiKey,r,a)}}class Ze{constructor(){this.genAI=null;const n="AIzaSyCf8PZ4jxCYXHM4cTq8U4nAzKMFfCvTbIo";this.genAI=new ze(n)}async analyzeMonitoringReport(n,s){if(!this.genAI)throw new Error("Gemini API key not configured");const a=this.genAI.getGenerativeModel({model:"gemini-1.5-pro"}),i=`
    You are an expert carbon verification analyst. Analyze this monitoring report data and satellite imagery to provide a comprehensive assessment.

    Report Data:
    ${n}

    Satellite Analysis:
    - NDVI: ${s.ndvi}
    - EVI: ${s.evi}
    - SAVI: ${s.savi}
    - Spectral Bands: B2=${s.B2}, B3=${s.B3}, B4=${s.B4}, B8=${s.B8}
    - Species: ${s.species}

    Provide analysis in the following JSON format:
    {
      "analysis": "Detailed analysis of the carbon removal claim",
      "confidence": 0.95,
      "recommendations": ["List of recommendations"],
      "riskFactors": ["List of potential risk factors"],
      "carbonEstimate": 1200
    }

    Focus on:
    1. Accuracy of carbon removal claims
    2. Satellite data consistency
    3. Methodology quality
    4. Risk assessment
    5. Confidence level (0-1)
    6. Your own carbon estimate based on the data
    `;try{const d=(await(await a.generateContent(i)).response).text().match(/\{[\s\S]*\}/);if(d)return JSON.parse(d[0]);throw new Error("Could not parse Gemini response")}catch(r){throw console.error("Gemini API error:",r),r}}async combineAnalysis(n,s){const r=n.confidence*.6+s.confidence*100*.4,o=Math.round(n.predicted*.6+s.carbonEstimate*.4),c={...n.featureImportance,"AI Analysis":Math.round(.4*100),"Risk Assessment":Math.round(s.riskFactors.length*10)};return{claimed:n.claimed,predicted:o,confidence:Math.round(r),featureImportance:c,geminiInsights:{analysis:s.analysis,recommendations:s.recommendations,riskFactors:s.riskFactors},modelCombination:{xaiWeight:Math.round(.6*100),geminiWeight:Math.round(.4*100),combined:!0}}}}const oe=new Ze;function st(){var L,G,D;const[e,n]=N.useState(null),[s,a]=N.useState(!1),[i,r]=N.useState(null),[o,c]=N.useState(null),[d,g]=N.useState(null),[b,v]=N.useState(!0),[u,l]=N.useState(null),[h,y]=N.useState(null),he=p=>{var m;const f=(m=p.target.files)==null?void 0:m[0];f&&f.type==="application/pdf"&&(n(f),r(null),g(null))},me=async()=>{if(e){a(!0);try{y("xai");const f=await fetch("/api/predict-biomass",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({B2:.05,B3:.06,B4:.04,B8:.3,species:"Mangrove"})});if(!f.ok)throw new Error("API request failed");const m=await f.json(),F={claimed:1250,predicted:Math.round(m.predicted_biomass),confidence:m.confidence,featureImportance:{NDVI:Math.round(m.feature_importance.NDVI||0),EVI:Math.round(m.feature_importance.EVI||0),SAVI:Math.round(m.feature_importance.SAVI||0),"Spectral Bands":Math.round((m.feature_importance.B2||0)+(m.feature_importance.B3||0)+(m.feature_importance.B4||0)+(m.feature_importance.B8||0))}};let U=F;if(b){y("gemini");try{const B=await oe.analyzeMonitoringReport(`Monitoring Report - Carbon Removal Claim: 1250 tonnes
          Methodology: Satellite-based monitoring with ground truth verification
          Area: 100 hectares of mangrove restoration
          Monitoring Period: Jan 2024 - Dec 2024
          Species: Rhizophora mucronata
          Density: 2000 trees per hectare`,{ndvi:m.ndvi||.8,evi:m.evi||.6,savi:m.savi||.7,B2:.05,B3:.06,B4:.04,B8:.3,species:"Mangrove"});l(B),y("combining"),U=await oe.combineAnalysis(F,B)}catch($){console.warn("Gemini analysis failed, using XAI only:",$)}}r(U),y(null)}catch(p){console.error("Error in AI processing:",p),r({claimed:1250,predicted:1180,confidence:87.5,featureImportance:{canopyDensity:35,treeHeights:28,satelliteImagery:22,other:15}}),y(null)}finally{a(!1)}}},ge=()=>{g("approve"),console.log("Approved for ACVA verification")},fe=()=>{g("reject"),console.log("Rejected - requesting resubmission")},j=85;return t.jsxs("div",{className:"p-6 readable-surface",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-gradient-heading text-3xl font-extrabold hero-readable-text mb-2",children:"XAI - AI-Powered Verification"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Upload monitoring reports for AI validation before ACVA review"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/70 rounded-lg shadow-sm border border-gray-200/60 dark:border-gray-700/60 p-6 backdrop-blur-sm",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[t.jsx(Ne,{className:"w-5 h-5 mr-2 text-blue-500 dark:text-blue-400"}),"Upload Monitoring Report"]}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors bg-white/60 dark:bg-gray-800/50",children:[t.jsx("input",{type:"file",accept:".pdf",onChange:he,className:"hidden",id:"file-upload"}),t.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[t.jsx(H,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Click to upload monitoring report"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"PDF files only"})]})]}),t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enhanced AI Analysis"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b,onChange:p=>v(p.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:b?"Using both XAI model + Gemini AI for enhanced analysis":"Using XAI model only"})]}),e&&t.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200 dark:bg-blue-900/20 dark:border-blue-800",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(H,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),t.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:e.name})]}),t.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]}),t.jsxs("button",{onClick:me,disabled:s,className:"mt-4 w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 dark:bg-blue-700 text-white font-medium rounded-lg hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(k,{className:"w-4 h-4 mr-2"}),s?h==="gemini"?"Analyzing with Gemini AI...":h==="combining"?"Combining AI analyses...":"Processing with XAI Model...":b?"Process with Enhanced AI (.)":"Process with XAI Model"]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"XAI Workflow"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-xs font-medium text-blue-600 dark:text-blue-300",children:"1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Upload Monitoring Report"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Submit PDF with claimed carbon removal data"})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-xs font-medium text-blue-600 dark:text-blue-300",children:"2"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:"AI Analysis"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Model analyzes satellite imagery, canopy density, and tree heights"})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-xs font-medium text-blue-600 dark:text-blue-300",children:"3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Decision"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"High confidence → Send to ACVA, Low confidence → Request resubmission"})]})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[s&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(k,{className:"w-12 h-12 text-blue-500 dark:text-blue-400 mx-auto mb-4 animate-pulse"}),t.jsx("p",{className:"text-lg font-medium text-gray-800 dark:text-gray-100 mb-2",children:h==="gemini"?"Gemini AI Analysis...":h==="combining"?"Combining AI Insights...":"XAI Model Processing..."}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h==="gemini"?"Analyzing report with advanced AI":h==="combining"?"Merging model analyses for optimal results":"Analyzing monitoring report with XAI model"}),t.jsx("div",{className:"mt-4 w-48 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mx-auto",children:t.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full animate-pulse",style:{width:"60%"}})})]})})}),i&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[t.jsx(k,{className:"w-5 h-5 mr-2 text-purple-500 dark:text-purple-400"}),(L=i==null?void 0:i.modelCombination)!=null&&L.combined?"Enhanced AI Analysis Results":"AI Analysis Results",((G=i==null?void 0:i.modelCombination)==null?void 0:G.combined)&&t.jsx(P,{className:"w-4 h-4 ml-2 text-yellow-500"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Claimed Carbon Removed"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(pe,{className:"w-6 h-6 text-blue-600 mr-2"}),t.jsx("span",{className:"text-2xl font-bold text-blue-700",children:i.claimed.toLocaleString()}),t.jsx("span",{className:"text-blue-600 ml-1",children:"tonnes"})]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"AI Predicted"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(k,{className:"w-6 h-6 text-purple-600 mr-2"}),t.jsx("span",{className:"text-2xl font-bold text-purple-700",children:i.predicted.toLocaleString()}),t.jsx("span",{className:"text-purple-600 ml-1",children:"tonnes"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Confidence Score"}),t.jsxs("span",{className:`text-lg font-bold ${i.confidence>=j?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[i.confidence,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:t.jsx("div",{className:`h-3 rounded-full ${i.confidence>=j?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${i.confidence}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Threshold: ",j,"% - ",i.confidence>=j?"Above":"Below"," threshold"]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-800 dark:text-gray-100 mb-3 flex items-center",children:[t.jsx(ve,{className:"w-4 h-4 mr-2"}),"Feature Importance"]}),t.jsx("div",{className:"space-y-3",children:Object.entries(i.featureImportance).map(([p,f])=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 capitalize",children:p.replace(/([A-Z])/g," $1").trim()}),t.jsxs("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:[f,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-nee-500 dark:bg-nee-600 h-2 rounded-full",style:{width:`${f}%`}})})]},p))})]})]}),(i==null?void 0:i.geminiInsights)&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[t.jsx(P,{className:"w-5 h-5 mr-2 text-yellow-500 dark:text-yellow-400"}),"Gemini AI Insights"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100 mb-2",children:"Analysis Summary"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:i.geminiInsights.analysis})]}),i.geminiInsights.recommendations.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100 mb-2",children:"Recommendations"}),t.jsx("ul",{className:"space-y-1",children:i.geminiInsights.recommendations.map((p,f)=>t.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-300 flex items-start",children:[t.jsx("span",{className:"text-green-500 mr-2",children:"•"}),p]},f))})]}),i.geminiInsights.riskFactors.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-800 dark:text-gray-100 mb-2 flex items-center",children:[t.jsx(be,{className:"w-4 h-4 mr-1 text-orange-500"}),"Risk Factors"]}),t.jsx("ul",{className:"space-y-1",children:i.geminiInsights.riskFactors.map((p,f)=>t.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-300 flex items-start",children:[t.jsx("span",{className:"text-orange-500 mr-2",children:"•"}),p]},f))})]})]})]}),((D=i==null?void 0:i.modelCombination)==null?void 0:D.combined)&&t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100 text-sm",children:"Enhanced Analysis Method"}),t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["XAI Model (",i.modelCombination.xaiWeight,"%) + Gemini AI (",i.modelCombination.geminiWeight,"%)"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Combined"})]})]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Decision Panel"}),t.jsx("div",{className:`p-4 rounded-lg mb-4 ${i.confidence>=j?"bg-nee-50 border border-nee-100":"bg-red-50 border border-red-200"}`,children:t.jsx("p",{className:`font-medium ${i.confidence>=j?"text-nee-800":"text-red-800"}`,children:i.confidence>=j?"✅ Confidence above threshold - Recommended for ACVA verification":"❌ Confidence below threshold - Recommend resubmission"})}),!d&&t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("button",{onClick:fe,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-red-600 dark:bg-red-700 text-white font-medium rounded-lg hover:bg-red-700 dark:hover:bg-red-600 transition-colors",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),"Reject - Request Resubmission"]}),t.jsxs("button",{onClick:ge,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-nee-600 dark:bg-nee-700 text-white font-medium rounded-lg hover:bg-nee-700 dark:hover:bg-nee-600 transition-colors",children:[t.jsx(xe,{className:"w-4 h-4 mr-2"}),"Approve - Send to ACVA"]})]}),d&&t.jsx("div",{className:`p-4 rounded-lg ${d==="approve"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:t.jsx("p",{className:`font-medium ${d==="approve"?"text-green-800":"text-red-800"}`,children:d==="approve"?"✅ Report approved and assigned to ACVA for physical verification":"❌ Report rejected - User must resubmit corrected monitoring report"})})]})]}),o&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"⚡ Final AI Output (to NCCR Dashboard)"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Tree count"}),t.jsx("p",{className:"font-bold text-nee-800 text-lg",children:o.treeCount})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Canopy cover"}),t.jsxs("p",{className:"font-bold text-nee-800 text-lg",children:[o.canopyCover,"%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"CO₂ tonnes"}),t.jsx("p",{className:"font-bold text-nee-800 text-lg",children:o.co2Tonnes})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Uncertainty"}),t.jsx("p",{className:"font-bold text-nee-800 text-lg",children:o.uncertainty})]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("h4",{className:"font-medium",children:"Liveness Verification"}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Movement"}),t.jsx("p",{className:"font-medium",children:o.liveness.movementScore.toFixed(3)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Lip-sync"}),t.jsx("p",{className:"font-medium",children:o.liveness.lipSyncScore.toFixed(3)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Liveness Score"}),t.jsx("p",{className:"font-bold text-nee-700",children:o.liveness.livenessScore.toFixed(3)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Authenticity"}),t.jsx("p",{className:`font-medium ${o.liveness.authenticity==="Pass"?"text-green-700":"text-red-700"}`,children:o.liveness.authenticity})]})]})]}),t.jsxs("div",{className:"p-3 rounded border bg-nee-50",children:[t.jsxs("p",{className:"text-sm",children:["Decision Category: ",t.jsx("span",{className:"font-semibold",children:o.decisionCategory})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Thresholds: ≥0.95 Auto pre-approve • 0.70–0.95 ACVA manual review • <0.70 Field audit"})]})]})})]})]})]})}export{st as default};
